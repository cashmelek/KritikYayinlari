<!DOCTYPE html>
<html>
<head>
    <title>Önbellek Temizleniyor...</title>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <script>
        // Tüm önbelleği temizle
        async function clearCache() {
            // Service worker'ları temizle
            if ('serviceWorker' in navigator) {
                const registrations = await navigator.serviceWorker.getRegistrations();
                for(let registration of registrations) {
                    registration.unregister();
                    console.log('Service Worker unregistered');
                }
            }
            
            // Cache API'yi temizle
            if ('caches' in window) {
                try {
                    const cacheNames = await caches.keys();
                    await Promise.all(
                        cacheNames.map(cacheName => {
                            console.log('Cache siliniyor:', cacheName);
                            return caches.delete(cacheName);
                        })
                    );
                    console.log('Tüm önbellek temizlendi');
                } catch (err) {
                    console.error('Önbellek temizleme hatası:', err);
                }
            }
            
            // IndexedDB'yi temizle
            const databases = await indexedDB.databases();
            databases.forEach(db => {
                try {
                    indexedDB.deleteDatabase(db.name);
                    console.log('IndexedDB silindi:', db.name);
                } catch (e) {
                    console.error('IndexedDB silme hatası:', e);
                }
            });
            
            // localStorage'i temizle
            localStorage.clear();
            console.log('localStorage temizlendi');
            
            // sessionStorage'i temizle
            sessionStorage.clear();
            console.log('sessionStorage temizlendi');
            
            // Anasayfaya yönlendir
            setTimeout(function() {
                const timestamp = new Date().getTime();
                window.location.href = 'anasayfa.html?nocache=' + timestamp;
            }, 1500);
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
        }
        .container {
            text-align: center;
            padding: 2rem;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            max-width: 500px;
        }
        h1 {
            color: #333;
            margin-bottom: 1rem;
        }
        p {
            color: #666;
            margin-bottom: 2rem;
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #d4af37;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 2rem;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body onload="clearCache()">
    <div class="container">
        <div class="loader"></div>
        <h1>Önbellek Temizleniyor...</h1>
        <p>Tarayıcı önbelleği temizleniyor ve sayfalarınız yenileniyor. 
        Lütfen bekleyin, kısa süre içinde ana sayfaya yönlendirileceksiniz.</p>
    </div>
</body>
</html> 